// <auto-generated>
// DO NOT EDIT - Generated by Devian Build System v10
// Unity wrapper for TableManager integration
// SSOT: skills/devian-unity/30-unity-components/14-table-manager/SKILL.md
// </auto-generated>

#nullable enable

using System;
using System.Collections;
using UnityEngine;

namespace Devian.Domain.Common
{
    public static partial class TB_COMPLEX_POLICY
    {
        /// <summary>
        /// Preload COMPLEX_POLICY table via TableManager.
        /// </summary>
        /// <param name="format">"ndjson" or "pb64"</param>
        /// <param name="onProgress">Progress callback (0-1)</param>
        /// <param name="onError">Error callback</param>
        public static IEnumerator PreloadAsync(
            string format,
            Action<float>? onProgress = null,
            Action<string>? onError = null)
        {
            yield return global::Devian.TableManager.Instance.PreloadTableAsync(
                format,
                "COMPLEX_POLICY",
                (rawText, rawBinary) =>
                {
                    if (format == "ndjson" && rawText != null)
                    {
                        LoadFromNdjson(rawText);
                    }
                    else if (format == "pb64" && rawBinary != null)
                    {
                        LoadFromPb64Binary(rawBinary);
                    }
                },
                onProgress,
                onError
            );
        }

        /// <summary>
        /// Unload COMPLEX_POLICY table from TableManager cache.
        /// </summary>
        public static void Unload(string format)
        {
            global::Devian.TableManager.Instance.UnloadTable(format, "COMPLEX_POLICY");
            Clear();
        }

        /// <summary>
        /// Check if COMPLEX_POLICY table is loaded in TableManager.
        /// </summary>
        public static bool IsLoaded(string format)
        {
            return global::Devian.TableManager.Instance.IsTableLoaded(format, "COMPLEX_POLICY");
        }
    }
}