// <auto-generated>
// DO NOT EDIT - Generated by Devian Build System v10
// Domain Table Registry - Auto-registers TB/ST loaders at startup
// SSOT: skills/devian-unity/10-base-system/14-table-manager/SKILL.md
// </auto-generated>

#nullable enable

using UnityEngine;

namespace Devian.Domain.Common
{
    /// <summary>
    /// Auto-registers TB/ST loaders for Common domain at startup.
    /// This ensures TableManager can auto-insert data when loading tables.
    /// </summary>
    internal static class DomainTableRegistry
    {
        [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]
        private static void Register()
        {
            global::Devian.TableManager.Instance.RegisterTbLoader("COMPLEX_POLICY", (format, text, bin) =>
            {
                if (format == global::Devian.TableFormat.Json && text != null)
                {
                    TB_COMPLEX_POLICY.LoadFromNdjson(text);
                    TB_COMPLEX_POLICY._AfterLoad();
                }
                else if (format == global::Devian.TableFormat.Pb64 && bin != null)
                {
                    TB_COMPLEX_POLICY.LoadFromPb64Binary(bin);
                    TB_COMPLEX_POLICY._AfterLoad();
                }
            });

            global::Devian.TableManager.Instance.RegisterTbLoader("ERROR_CLIENT", (format, text, bin) =>
            {
                if (format == global::Devian.TableFormat.Json && text != null)
                {
                    TB_ERROR_CLIENT.LoadFromNdjson(text);
                    TB_ERROR_CLIENT._AfterLoad();
                }
                else if (format == global::Devian.TableFormat.Pb64 && bin != null)
                {
                    TB_ERROR_CLIENT.LoadFromPb64Binary(bin);
                    TB_ERROR_CLIENT._AfterLoad();
                }
            });

            global::Devian.TableManager.Instance.RegisterTbLoader("ERROR_SERVER", (format, text, bin) =>
            {
                if (format == global::Devian.TableFormat.Json && text != null)
                {
                    TB_ERROR_SERVER.LoadFromNdjson(text);
                    TB_ERROR_SERVER._AfterLoad();
                }
                else if (format == global::Devian.TableFormat.Pb64 && bin != null)
                {
                    TB_ERROR_SERVER.LoadFromPb64Binary(bin);
                    TB_ERROR_SERVER._AfterLoad();
                }
            });

            global::Devian.TableManager.Instance.RegisterStLoader("TEXT", (format, lang, text, pb64Text) =>
            {
                if (format == global::Devian.TableFormat.Json && text != null)
                    ST_TEXT._LoadFromNdjson(text, lang);
                else if (format == global::Devian.TableFormat.Pb64 && pb64Text != null)
                    ST_TEXT._LoadFromPb64(pb64Text, lang);
            });

        }
    }
}