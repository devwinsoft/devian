{
  "direction": "client_to_server",
  "messages": [
    {
      "name": "LoginRequest",
      "fields": [
        { "name": "userId", "type": "string" },
        { "name": "token", "type": "string" },
        { "name": "version", "type": "int32" }
      ]
    },
    {
      "name": "JoinRoomRequest",
      "opcode": 100,
      "fields": [
        { "name": "roomId", "type": "int32" },
        { "name": "password", "type": "string", "optional": true }
      ]
    },
    {
      "name": "ChatMessage",
      "fields": [
        { "name": "channel", "type": "int32" },
        { "name": "message", "type": "string" },
        { "name": "targetUserIds", "type": "int64[]", "optional": true }
      ]
    },
    {
      "name": "UploadData",
      "fields": [
        { "name": "data", "type": "bytes" },
        { "name": "metadata", "type": "map<string,string>", "optional": true },
        { "name": "flags", "type": "bool[]" }
      ]
    }
  ]
}
