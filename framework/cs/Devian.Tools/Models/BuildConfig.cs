// <auto-generated>
// DO NOT EDIT - Generated by Devian Build System
// </auto-generated>

using System.Collections.Generic;
using System.Text.Json.Serialization;

namespace Devian.Tools.Models
{

    /// <summary>
    /// build.json 구조 정의 (v9)
    /// 
    /// v9 스키마:
    /// - domains: tables + contracts (Data domain)
    /// - protocols: protocolsDir/protocolFile (IDL link domain)
    /// - domains와 protocols는 목적이 다르며 섞이지 않는다
    /// </summary>
    public class BuildConfig
    {
        [JsonPropertyName("version")]
        public string Version { get; set; } = "9";

        [JsonPropertyName("tempDir")]
        public string TempDir { get; set; } = ".devian/work";

        [JsonPropertyName("domains")]
        public Dictionary<string, DomainConfig>? Domains { get; set; }

        [JsonPropertyName("protocols")]
        public Dictionary<string, ProtocolConfig>? Protocols { get; set; }
    }

    /// <summary>
    /// 도메인별 설정 (v9) - Data domain용
    /// 
    /// tables + contracts만 허용
    /// protocolsDir/protocolFile은 ProtocolConfig로 분리됨
    /// </summary>
    public class DomainConfig
    {
        // Contracts
        [JsonPropertyName("contractsDir")]
        public string? ContractsDir { get; set; }

        [JsonPropertyName("contractFiles")]
        public List<string>? ContractFiles { get; set; }

        // Tables
        [JsonPropertyName("tablesDir")]
        public string? TablesDir { get; set; }

        [JsonPropertyName("tableFiles")]
        public List<string>? TableFiles { get; set; }

        [JsonPropertyName("dependsOnCommon")]
        public bool DependsOnCommon { get; set; } = true;

        [JsonPropertyName("csTargetDirs")]
        public List<string> CsTargetDirs { get; set; } = new();

        [JsonPropertyName("tsTargetDirs")]
        public List<string> TsTargetDirs { get; set; } = new();

        [JsonPropertyName("upmTargetDirs")]
        public List<string> UpmTargetDirs { get; set; } = new();

        [JsonPropertyName("dataTargetDirs")]
        public List<string> DataTargetDirs { get; set; } = new();
    }

    /// <summary>
    /// 프로토콜 설정 (v9) - IDL link domain용
    /// 
    /// protocolsDir + protocolFile (단일 파일)만 허용
    /// {protocolsDir}/{protocolFile}로 resolve
    /// </summary>
    public class ProtocolConfig
    {
        [JsonPropertyName("protocolsDir")]
        public string? ProtocolsDir { get; set; }

        [JsonPropertyName("protocolFile")]
        public string? ProtocolFile { get; set; }

        [JsonPropertyName("csTargetDirs")]
        public List<string> CsTargetDirs { get; set; } = new();

        [JsonPropertyName("tsTargetDirs")]
        public List<string> TsTargetDirs { get; set; } = new();
    }
}
